{
  "name": "Intelligente YouTube Wissensdatenbank",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        1200,
        360
      ],
      "id": "deutsch-llm-agent-001",
      "name": "Deutscher KI Experte",
      "credentials": {
        "openRouterApi": {
          "id": "kjpcuppgDdDLC18x",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        1520,
        540
      ],
      "id": "deutsche-embeddings-spezialist",
      "name": "Deutsche Embeddings Engine",
      "credentials": {
        "openAiApi": {
          "id": "UkkBac0y6p8xHcrW",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.Suchanfrage }} bezogen auf {{ $json['Video Titel'] }}",
        "options": {
          "systemMessage": "# Überblick\nSie sind ein deutscher KI-Experte mit Zugang zur YouTube Wissensdatenbank, die Transkripte von YouTube-Videos enthält.\n\nWenn der Nutzer eine Frage stellt, durchsuchen Sie die Datenbank mehrfach, um die relevantesten Informationen zu sammeln. Nutzen Sie diese Ergebnisse für eine vollständige und präzise Antwort.\n\nFür jede Tatsache, Erkenntnis oder jedes Zitat fügen Sie explizit den Videotitel, Zeitstempel und die Video-URL hinzu, die alle in den Metadaten verfügbar sind. Verwenden Sie direkte Zitate aus dem Transkript und zitieren Sie immer die Quellen im folgenden Format:\n\n\"zitierter Inhalt\" (Videotitel, 03:12 — Hier ansehen)\n\nFragen Sie iterativ ab, bis Sie genügend Kontext für eine hilfreiche Antwort haben.\n\nKATEGORISIERUNG:\nOrdnen Sie jede Antwort einer dieser Kategorien zu:\n🎯 BUSINESS & STRATEGIE\n🚀 TECHNOLOGIE & INNOVATION\n📚 BILDUNG & LERNEN\n💡 KREATIVITÄT & DESIGN\n🏃‍♂️ PERSÖNLICHKEITSENTWICKLUNG\n🌟 LIFESTYLE & TRENDS\n\nBeginnen Sie jede Antwort mit der entsprechenden Kategorie-Kennzeichnung."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        880,
        200
      ],
      "id": "intelligenter-recherche-agent",
      "name": "Intelligenter Recherche Agent",
      "notes": "Spezialisierter Agent für kategorisierte YouTube-Wissenssuche"
    },
    {
      "parameters": {
        "formTitle": "🎥 YouTube Wissen Abfrage",
        "formDescription": "Durchsuchen Sie Ihre persönliche YouTube Wissensbibliothek mit präzisen Fragen",
        "formFields": {
          "values": [
            {
              "fieldLabel": "📹 Video Titel",
              "requiredField": true,
              "placeholder": "Name des Videos in Ihrer Datenbank"
            },
            {
              "fieldLabel": "🔍 Suchanfrage",
              "requiredField": true,
              "placeholder": "Was möchten Sie aus diesem Video wissen?"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.2,
      "position": [
        120,
        200
      ],
      "id": "wissens-abfrage-portal",
      "name": "📋 Wissens-Abfrage Portal",
      "webhookId": "deutsche-video-wissens-abfrage-2024",
      "notes": "Eingangsportal für YouTube-Wissensanfragen"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "Durchsucht die deutsche YouTube Transkript-Datenbank nach spezifischen Video-Inhalten und liefert kategorisierte Antworten.",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "videoTitle",
                "value": "={{ $('📋 Wissens-Abfrage Portal').item.json['📹 Video Titel'] }}"
              }
            ]
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [
        1520,
        200
      ],
      "id": "spezifische-video-suche",
      "name": "🎯 Spezifische Video-Suche",
      "credentials": {
        "supabaseApi": {
          "id": "sEA7DS8KnjOiIRlz",
          "name": "NH Supabase account"
        }
      },
      "notes": "Filtert nach spezifischen Videos für gezielte Suche"
    },
    {
      "parameters": {
        "content": "# 🎥 INTELLIGENTE YOUTUBE WISSENSDATENBANK\n## 🎯 Kategorisierte Wissensextraktion aus Video-Inhalten\n### 📊 Features: Telegram-Integration • Kategorisierung • Deutsche Antworten\n#### 🔧 Status: Produktionsbereit für Wissensmanagement",
        "height": 520,
        "width": 1800,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -200,
        -80
      ],
      "id": "haupt-system-banner",
      "name": "🎨 System Banner",
      "notes": "Hauptsystem-Beschreibung mit visueller Übersicht"
    },
    {
      "parameters": {
        "content": "# 🔍 ERWEITERTE RAG-SUCHE\n## 🚀 Mit Cohere Reranking & TopK=20\n### 📈 Optimiert für höchste Suchqualität",
        "height": 480,
        "width": 1400,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -200,
        680
      ],
      "id": "erweiterte-suche-banner",
      "name": "🎯 RAG-Optimierung Banner",
      "notes": "Technische Details der erweiterten Suchfunktionen"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "Durchsucht die komplette YouTube Transkript-Datenbank mit erweiterten Suchfunktionen und intelligenter Kategorisierung für präzise Antworten.",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "topK": 20,
        "useReranker": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [
        600,
        920
      ],
      "id": "erweiterte-volltext-suche",
      "name": "🔍 Erweiterte Volltext-Suche",
      "credentials": {
        "supabaseApi": {
          "id": "sEA7DS8KnjOiIRlz",
          "name": "NH Supabase account"
        }
      },
      "notes": "Vollständige Datenbanksuche mit Reranking für optimale Ergebnisse"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        400,
        1080
      ],
      "id": "deutsche-volltext-embeddings",
      "name": "🧠 Deutsche Volltext-Embeddings",
      "credentials": {
        "openAiApi": {
          "id": "UkkBac0y6p8xHcrW",
          "name": "OpenAi account"
        }
      },
      "notes": "OpenAI Embeddings für deutsche Textverarbeitung"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.rerankerCohere",
      "typeVersion": 1,
      "position": [
        880,
        1120
      ],
      "id": "intelligentes-reranking",
      "name": "🎯 Intelligentes Reranking",
      "credentials": {
        "cohereApi": {
          "id": "5BT0jBZnqD766duT",
          "name": "CohereApi account 2"
        }
      },
      "notes": "Cohere Reranking für optimierte Suchergebnisse"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.message.text }}",
        "options": {
          "systemMessage": "# Deutsche YouTube Wissensassistenz\n\nSie sind ein spezialisierter deutscher KI-Assistent mit Zugang zur YouTube Transkript-Datenbank.\n\nWenn Benutzer eine Frage stellen, durchsuchen Sie die Datenbank mehrfach für die relevantesten Informationen. Generieren Sie vollständige und genaue Antworten.\n\nFür jede Tatsache, Erkenntnis oder jedes Zitat zitieren Sie explizit:\n- Videotitel\n- Zeitstempel  \n- Video-URL (alle in Metadaten verfügbar)\n\nVerwenden Sie direkte Transkript-Zitate und zitieren Sie im Format:\n„zitierter Inhalt" (Videotitel, 03:12 — Hier ansehen: http://...)\n\nAntworte IMMER auf Deutsch. Wenn Informationen nicht in der Datenbank verfügbar sind, sage \"Das weiß ich nicht\". Beziehen Sie sich NICHT auf Ihr gelerntes Wissen. Links müssen vollständig ausgeschrieben sein.\n\nKATEGORISIERUNGSSYSTEM:\nOrdnen Sie jede Antwort einer Hauptkategorie zu:\n\n🎯 BUSINESS & STRATEGIE\n- Unternehmensführung, Marketing, Verkauf\n- Geschäftsmodelle, Investitionen\n- Entrepreneurship, Startup-Wissen\n\n🚀 TECHNOLOGIE & INNOVATION  \n- Software-Entwicklung, KI, Automatisierung\n- Tools, Plattformen, Tech-Trends\n- Digitale Transformation\n\n📚 BILDUNG & LERNEN\n- Lernmethoden, Wissensvermittlung\n- Online-Kurse, Tutorials\n- Persönliche Weiterbildung\n\n💡 KREATIVITÄT & DESIGN\n- Content Creation, Design-Prinzipien\n- Kreative Prozesse, Inspiration\n- Kunst, Musik, visuelle Medien\n\n🏃‍♂️ PERSÖNLICHKEITSENTWICKLUNG\n- Produktivität, Zeitmanagement\n- Mindset, Motivation, Gewohnheiten\n- Karriereentwicklung, Leadership\n\n🌟 LIFESTYLE & TRENDS\n- Gesundheit, Fitness, Wellness\n- Reisen, Hobbys, Social Media\n- Aktuelle Trends, Kultur\n\nFormat jeder Antwort:\n[KATEGORIE-EMOJI] KATEGORIE-NAME\n\n[Antwortinhalt mit Zitaten]\n\n📊 Zusammenfassung: [Kurze Kernaussagen]\n🔗 Quellen: [Anzahl verwendeter Videos]\n\nSenden Sie die Antwort an Telegram."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        200,
        920
      ],
      "id": "kategorisierter-wissens-agent",
      "name": "🎓 Kategorisierter Wissens-Agent",
      "notes": "Hauptagent für kategorisierte deutsche YouTube-Wissensantworten"
    },
    {
      "parameters": {
        "formTitle": "📥 YouTube Video Hinzufügen",
        "formDescription": "Erweitern Sie Ihre Wissensdatenbank um neue YouTube-Videos",
        "formFields": {
          "values": [
            {
              "fieldLabel": "📹 Video Titel",
              "requiredField": true,
              "placeholder": "Aussagekräftiger Titel für das Video"
            },
            {
              "fieldLabel": "🔗 YouTube URL",
              "requiredField": true,
              "placeholder": "https://www.youtube.com/watch?v=..."
            }
          ]
        },
        "options": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.2,
      "position": [
        2000,
        1600
      ],
      "id": "video-hinzufuegen-portal",
      "name": "📥 Video Hinzufügen Portal",
      "webhookId": "deutsche-video-upload-wissensbasis-2024",
      "notes": "Portal zum Hinzufügen neuer YouTube-Videos zur Wissensbasis"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.apify.com/v2/acts/pintostudio~youtube-transcript-scraper/run-sync-get-dataset-items",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "token",
              "value": "YOUR_APIFY_API_TOKEN"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "videoUrl",
              "value": "={{ $json['🔗 YouTube URL'] }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2240,
        1600
      ],
      "id": "transkript-extraktor",
      "name": "📝 Transkript-Extraktor",
      "notes": "Apify-basierte YouTube Transkript-Extraktion für deutsche Inhalte"
    },
    {
      "parameters": {
        "jsCode": "// Deutsche Transkript-Verarbeitung - Kombination zu einem String\n\n// Eingabedaten abrufen\nconst inputData = $input.all()[0].json;\n\n// Daten-Array extrahieren\nconst transcriptData = inputData.data;\n\n// Text-Segmente filtern und kombinieren\nconst kombinierterText = transcriptData\n  .filter(item => item.text) // Nur Elemente mit Text-Property\n  .map(item => item.text.trim().replace(/\\\\n/g, ' ')) // Text trimmen und Zeilenumbrüche ersetzen\n  .join(' ') // Mit Leerzeichen verbinden\n  .replace(/\\\\s+/g, ' '); // Mehrfache Leerzeichen durch einfache ersetzen\n\n// Rückgabe als einzelnes Element\nreturn [\n  {\n    json: {\n      kombinierterText: kombinierterText,\n      urspruenglicheAnzahl: transcriptData.length,\n      textSegmentAnzahl: transcriptData.filter(item => item.text).length,\n      verarbeitungsZeit: new Date().toLocaleString('de-DE'),\n      status: 'Erfolgreich verarbeitet'\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2520,
        1520
      ],
      "id": "deutsche-transkript-kombination",
      "name": "📋 Deutsche Transkript-Kombination",
      "notes": "Kombiniert YouTube-Transkript in deutschen Text ohne Zeilenumbrüche"
    },
    {
      "parameters": {
        "jsCode": "// Deutsche Transkript-Chunking mit Zeitstempeln - Gruppierung in 20er-Blöcke\n\n// Eingabedaten abrufen\nconst inputData = $input.all()[0].json;\n\n// Daten-Array extrahieren und nach Text filtern\nconst transcriptData = inputData.data.filter(item => item.text);\n\n// Gruppierung in 20er-Blöcke\nconst chunkGroesse = 20;\nconst chunks = [];\n\nfor (let i = 0; i < transcriptData.length; i += chunkGroesse) {\n  const chunk = transcriptData.slice(i, i + chunkGroesse);\n  \n  // Text aller Segmente des Chunks kombinieren\n  const kombinierterText = chunk\n    .map(item => item.text.trim())\n    .join(' ');\n  \n  // Zeitstempel-Bereich berechnen\n  const erstesElement = chunk[0];\n  const letztesElement = chunk[chunk.length - 1];\n  \n  const startZeit = parseFloat(erstesElement.start);\n  const endZeit = parseFloat(letztesElement.start) + parseFloat(letztesElement.dur);\n  \n  // Hilfsfunktion für Zeit-Formatierung zu MM:SS\n  const zeitFormatieren = (sekunden) => {\n    if (sekunden < 60) {\n      return `${sekunden.toFixed(3)}s`;\n    }\n    const minuten = Math.floor(sekunden / 60);\n    const restSekunden = sekunden % 60;\n    return `${minuten}:${restSekunden.toFixed(3).padStart(6, '0')}`;\n  };\n  \n  // Deutschen Chunk-Objekt erstellen\n  chunks.push({\n    json: {\n      text: kombinierterText,\n      zeitstempel: {\n        start: startZeit,\n        ende: endZeit,\n        dauer: endZeit - startZeit,\n        startFormatiert: zeitFormatieren(startZeit),\n        endeFormatiert: zeitFormatieren(endZeit),\n        dauerFormatiert: zeitFormatieren(endZeit - startZeit)\n      },\n      elementAnzahl: chunk.length,\n      chunkNummer: Math.floor(i / chunkGroesse) + 1,\n      verarbeitungsStatus: 'Deutsche Segmentierung abgeschlossen'\n    }\n  });\n}\n\n// Alle Chunks als separate Elemente zurückgeben\nreturn chunks;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2520,
        1760
      ],
      "id": "deutsche-zeitstempel-segmente",
      "name": "⏱️ Deutsche Zeitstempel-Segmente",
      "notes": "Intelligente Segmentierung mit deutschen Zeitstempel-Formatierung"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineAll",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        2760,
        1600
      ],
      "id": "deutsche-daten-zusammenfuehrung",
      "name": "🔄 Deutsche Daten-Zusammenführung",
      "notes": "Zusammenführung der verarbeiteten deutschen Transkriptdaten"
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "documentId": {
          "__rl": true,
          "value": "1z11UfMdmbfW40g9d0a_JtE4Iuusjrd3kpernEETnWj4",
          "mode": "list",
          "cachedResultName": "Deutsche YouTube Videos Verwaltung",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1z11UfMdmbfW40g9d0a_JtE4Iuusjrd3kpernEETnWj4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Haupttabelle",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1z11UfMdmbfW40g9d0a_JtE4Iuusjrd3kpernEETnWj4/edit#gid=0"
        },
        "event": "rowUpdate",
        "options": {
          "columnsToWatch": [
            "Status"
          ]
        }
      },
      "type": "n8n-nodes-base.googleSheetsTrigger",
      "typeVersion": 1,
      "position": [
        2000,
        2200
      ],
      "id": "deutsche-tabellen-ueberwachung",
      "name": "📊 Deutsche Tabellen-Überwachung",
      "credentials": {
        "googleSheetsTriggerOAuth2Api": {
          "id": "4aXf9935H0AnCIcv",
          "name": "Google Sheets Trigger account"
        }
      },
      "notes": "Überwacht Änderungen in der deutschen Video-Verwaltungstabelle"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "loeschung-filter-bedingung",
              "leftValue": "={{ $json.Status }}",
              "rightValue": "Entfernen",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        2240,
        2200
      ],
      "id": "deutscher-loeschung-filter",
      "name": "🗑️ Deutscher Löschung-Filter",
      "notes": "Filtert Videos zur Entfernung aus der deutschen Wissensdatenbank"
    },
    {
      "parameters": {
        "operation": "delete",
        "tableId": "documents",
        "filterType": "string",
        "filterString": "=metadata->>videoURL=like.*{{ $json.url }}"
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        2840,
        2200
      ],
      "id": "deutsche-video-entfernung",
      "name": "🗑️ Deutsche Video-Entfernung",
      "alwaysOutputData": true,
      "credentials": {
        "supabaseApi": {
          "id": "sEA7DS8KnjOiIRlz",
          "name": "NH Supabase account"
        }
      },
      "notes": "Entfernt Video-Einträge aus der deutschen Supabase-Wissensdatenbank"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "12D8zV6sDK3oNGIPCmJlHkW3QBtetejpQtDAXU-XzKS4",
          "mode": "list",
          "cachedResultName": "Deutsche YouTube Videos Hauptliste",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/12D8zV6sDK3oNGIPCmJlHkW3QBtetejpQtDAXU-XzKS4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Haupttabelle",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Ur4YOjXHSG30KZvxZHzHbANO-udaZ5wKzaKlxQiCYAc/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "URL": "={{ $('Deutsche Feld-Bearbeitung').item.json.url }}",
            "Status": "Entfernt"
          },
          "matchingColumns": [
            "URL"
          ],
          "schema": [
            {
              "id": "Titel",
              "displayName": "Titel",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "URL",
              "displayName": "URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Transkript",
              "displayName": "Transkript",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "zeilen_nummer",
              "displayName": "zeilen_nummer",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        3080,
        2200
      ],
      "id": "deutsche-tabellen-aktualisierung",
      "name": "📝 Deutsche Tabellen-Aktualisierung",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "9nrggIIrhCEER4P5",
          "name": "Google Sheets account"
        }
      },
      "notes": "Aktualisiert deutsche Tabellen-Einträge nach Video-Entfernung"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "deutsche-url-zuweisung",
              "name": "url",
              "value": "={{ $json.URL }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2640,
        2200
      ],
      "id": "deutsche-feld-bearbeitung",
      "name": "⚙️ Deutsche Feld-Bearbeitung",
      "notes": "Bereitet deutsche URL-Daten für Löschoperationen vor"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2440,
        2200
      ],
      "id": "deutsche-batch-verarbeitung",
      "name": "🔄 Deutsche Batch-Verarbeitung",
      "notes": "Verarbeitet deutsche Video-Löschungen in optimierten Batches"
    },
    {
      "parameters": {
        "content": "# 🗂️ DEUTSCHE VIDEO-VERWALTUNG\n## 📊 Google Sheets Integration • Batch-Processing • Automatische Löschung\n### 🔧 Optimiert für deutsche YouTube-Inhalte",
        "height": 520,
        "width": 1400,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1800,
        2000
      ],
      "id": "deutsche-verwaltungs-banner",
      "name": "📋 Deutsche Verwaltungs-Banner",
      "notes": "Übersicht über das deutsche Video-Verwaltungssystem"
    },
    {
      "parameters": {
        "content": "# 🔄 DEUTSCHE TRANSKRIPT-PIPELINE\n## 📝 Apify-Integration • Intelligente Segmentierung • Zeitstempel-Verarbeitung\n### 🇩🇪 Optimiert für deutsche Sprache und Formatierung\n#### 🎯 Features: Chunk-Verarbeitung • Metadaten-Extraktion • Supabase-Integration",
        "height": 520,
        "width": 1800,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1800,
        1320
      ],
      "id": "deutsche-pipeline-banner",
      "name": "🔧 Deutsche Pipeline-Banner",
      "notes": "Technische Übersicht der deutschen Transkript-Verarbeitungs-Pipeline"
    },
    {
      "parameters": {
        "mode": "insert",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [
        3120,
        1600
      ],
      "id": "deutsche-wissensbasis-speicherung",
      "name": "💾 Deutsche Wissensbasis-Speicherung",
      "credentials": {
        "supabaseApi": {
          "id": "sEA7DS8KnjOiIRlz",
          "name": "NH Supabase account"
        }
      },
      "notes": "Speichert verarbeitete deutsche Inhalte in der Supabase Wissensdatenbank"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        3040,
        1760
      ],
      "id": "deutsche-speicher-embeddings",
      "name": "🧠 Deutsche Speicher-Embeddings",
      "credentials": {
        "openAiApi": {
          "id": "UkkBac0y6p8xHcrW",
          "name": "OpenAi account"
        }
      },
      "notes": "OpenAI Embeddings für deutsche Inhalte vor Datenbank-Speicherung"
    },
    {
      "parameters": {
        "jsonMode": "expressionData",
        "jsonData": "={{ $('🔄 Deutsche Daten-Zusammenführung').item.json.text }}",
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "videoTitle",
                "value": "={{ $('📥 Video Hinzufügen Portal').first().json['📹 Video Titel'] }}"
              },
              {
                "name": "timestamp",
                "value": "={{ $('🔄 Deutsche Daten-Zusammenführung').item.json.zeitstempel.startFormatiert }}-{{ $('🔄 Deutsche Daten-Zusammenführung').item.json.zeitstempel.endeFormatiert }}"
              },
              {
                "name": "videoURL",
                "value": "={{ $('📥 Video Hinzufügen Portal').item.json['🔗 YouTube URL'] }}"
              },
              {
                "name": "kategorie",
                "value": "Unklassifiziert"
              },
              {
                "name": "sprache",
                "value": "Deutsch"
              },
              {
                "name": "verarbeitungsDatum",
                "value": "={{ new Date().toLocaleDateString('de-DE') }}"
              }
            ]
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        3240,
        1800
      ],
      "id": "deutsche-dokument-aufbereitung",
      "name": "📄 Deutsche Dokument-Aufbereitung",
      "notes": "Bereitet deutsche Dokumente mit erweiterten Metadaten für die Speicherung vor"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "12D8zV6sDK3oNGIPCmJlHkW3QBtetejpQtDAXU-XzKS4",
          "mode": "list",
          "cachedResultName": "Deutsche YouTube Videos Hauptliste",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/12D8zV6sDK3oNGIPCmJlHkW3QBtetejpQtDAXU-XzKS4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Haupttabelle",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/12D8zV6sDK3oNGIPCmJlHkW3QBtetejpQtDAXU-XzKS4/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Titel": "={{ $('📥 Video Hinzufügen Portal').item.json['📹 Video Titel'] }}",
            "URL": "={{ $('📥 Video Hinzufügen Portal').item.json['🔗 YouTube URL'] }}",
            "Status": "=Verarbeitet",
            "Transkript": "={{ $('📋 Deutsche Transkript-Kombination').item.json.kombinierterText }}",
            "Kategorie": "=Automatisch kategorisiert",
            "Datum": "={{ new Date().toLocaleDateString('de-DE') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Titel",
              "displayName": "Titel",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "URL",
              "displayName": "URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Transkript",
              "displayName": "Transkript",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Kategorie",
              "displayName": "Kategorie",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Datum",
              "displayName": "Datum",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        3520,
        1600
      ],
      "id": "deutsche-tabellen-hinzufuegung",
      "name": "📊 Deutsche Tabellen-Hinzufügung",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "9nrggIIrhCEER4P5",
          "name": "Google Sheets account"
        }
      },
      "notes": "Fügt neue deutsche Video-Einträge zur Verwaltungstabelle hinzu"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.message.from.id }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        200,
        1120
      ],
      "id": "deutsche-konversations-speicher",
      "name": "🧠 Deutsche Konversations-Speicher",
      "notes": "Speichert deutsche Konversationsverläufe pro Telegram-Nutzer"
    },
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        -160,
        920
      ],
      "id": "deutscher-telegram-eingang",
      "name": "📱 Deutscher Telegram-Eingang",
      "webhookId": "deutsche-wissensdatenbank-telegram-2024",
      "credentials": {
        "telegramApi": {
          "id": "9qJXk2uVlu9DKzid",
          "name": "Nano N8N"
        }
      },
      "notes": "Empfängt deutsche Anfragen über Telegram für die Wissensdatenbank"
    },
    {
      "parameters": {
        "chatId": "={{ $('📱 Deutscher Telegram-Eingang').item.json.message.from.id }}",
        "text": "={{ $json.output }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1000,
        800
      ],
      "id": "deutsche-telegram-antwort",
      "name": "📤 Deutsche Telegram-Antwort",
      "webhookId": "deutsche-wissensdatenbank-antwort-2024",
      "credentials": {
        "telegramApi": {
          "id": "9qJXk2uVlu9DKzid",
          "name": "Nano N8N"
        }
      },
      "notes": "Sendet kategorisierte deutsche Antworten zurück an Telegram"
    },
    {
      "parameters": {
        "model": "openai/gpt-4o",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        40,
        1160
      ],
      "id": "deutscher-premium-llm",
      "name": "🚀 Deutscher Premium-LLM",
      "credentials": {
        "openRouterApi": {
          "id": "kjpcuppgDdDLC18x",
          "name": "OpenRouter account"
        }
      },
      "notes": "Premium GPT-4o Modell für hochwertige deutsche Wissensantworten"
    }
  ],
  "pinData": {},
  "connections": {
    "Deutscher KI Experte": {
      "ai_languageModel": [
        [
          {
            "node": "Intelligenter Recherche Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Deutsche Embeddings Engine": {
      "ai_embedding": [
        [
          {
            "node": "🎯 Spezifische Video-Suche",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "📋 Wissens-Abfrage Portal": {
      "main": [
        [
          {
            "node": "Intelligenter Recherche Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "🎯 Spezifische Video-Suche": {
      "ai_tool": [
        [
          {
            "node": "Intelligenter Recherche Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "🔍 Erweiterte Volltext-Suche": {
      "ai_tool": [
        [
          {
            "node": "🎓 Kategorisierter Wissens-Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "🧠 Deutsche Volltext-Embeddings": {
      "ai_embedding": [
        [
          {
            "node": "🔍 Erweiterte Volltext-Suche",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "🎯 Intelligentes Reranking": {
      "ai_reranker": [
        [
          {
            "node": "🔍 Erweiterte Volltext-Suche",
            "type": "ai_reranker",
            "index": 0
          }
        ]
      ]
    },
    "📥 Video Hinzufügen Portal": {
      "main": [
        [
          {
            "node": "📝 Transkript-Extraktor",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "📝 Transkript-Extraktor": {
      "main": [
        [
          {
            "node": "📋 Deutsche Transkript-Kombination",
            "type": "main",
            "index": 0
          },
          {
            "node": "⏱️ Deutsche Zeitstempel-Segmente",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "📋 Deutsche Transkript-Kombination": {
      "main": [
        [
          {
            "node": "🔄 Deutsche Daten-Zusammenführung",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "⏱️ Deutsche Zeitstempel-Segmente": {
      "main": [
        [
          {
            "node": "🔄 Deutsche Daten-Zusammenführung",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "🔄 Deutsche Daten-Zusammenführung": {
      "main": [
        [
          {
            "node": "💾 Deutsche Wissensbasis-Speicherung",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "📊 Deutsche Tabellen-Überwachung": {
      "main": [
        [
          {
            "node": "🗑️ Deutscher Löschung-Filter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "🗑️ Deutscher Löschung-Filter": {
      "main": [
        [
          {
            "node": "🔄 Deutsche Batch-Verarbeitung",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "🗑️ Deutsche Video-Entfernung": {
      "main": [
        [
          {
            "node": "📝 Deutsche Tabellen-Aktualisierung",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "📝 Deutsche Tabellen-Aktualisierung": {
      "main": [
        [
          {
            "node": "🔄 Deutsche Batch-Verarbeitung",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "⚙️ Deutsche Feld-Bearbeitung": {
      "main": [
        [
          {
            "node": "🗑️ Deutsche Video-Entfernung",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "🔄 Deutsche Batch-Verarbeitung": {
      "main": [
        [],
        [
          {
            "node": "⚙️ Deutsche Feld-Bearbeitung",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "💾 Deutsche Wissensbasis-Speicherung": {
      "main": [
        [
          {
            "node": "📊 Deutsche Tabellen-Hinzufügung",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "🧠 Deutsche Speicher-Embeddings": {
      "ai_embedding": [
        [
          {
            "node": "💾 Deutsche Wissensbasis-Speicherung",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "📄 Deutsche Dokument-Aufbereitung": {
      "ai_document": [
        [
          {
            "node": "💾 Deutsche Wissensbasis-Speicherung",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "🧠 Deutsche Konversations-Speicher": {
      "ai_memory": [
        [
          {
            "node": "🎓 Kategorisierter Wissens-Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "📱 Deutscher Telegram-Eingang": {
      "main": [
        [
          {
            "node": "🎓 Kategorisierter Wissens-Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "🎓 Kategorisierter Wissens-Agent": {
      "main": [
        [
          {
            "node": "📤 Deutsche Telegram-Antwort",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "🚀 Deutscher Premium-LLM": {
      "ai_languageModel": [
        [
          {
            "node": "🎓 Kategorisierter Wissens-Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "timezone": "Europe/Berlin",
    "saveDataErrorExecution": "all",
    "saveDataSuccessExecution": "all"
  },
  "versionId": "deutsche-youtube-wissensdatenbank-v2-2024",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "deutsche-youtube-wissensdatenbank-system-2024"
  },
  "id": "DeutscheYouTubeWissensdatenbank2024",
  "tags": [
    {
      "createdAt": "2024-09-06T12:00:00.000Z",
      "updatedAt": "2024-09-06T12:00:00.000Z",
      "id": "deutsche-wissensdatenbank",
      "name": "Deutsche Wissensdatenbank"
    },
    {
      "createdAt": "2024-09-06T12:00:00.000Z", 
      "updatedAt": "2024-09-06T12:00:00.000Z",
      "id": "youtube-rag-system",
      "name": "YouTube RAG System"
    },
    {
      "createdAt": "2024-09-06T12:00:00.000Z",
      "updatedAt": "2024-09-06T12:00:00.000Z", 
      "id": "kategorisierte-suche",
      "name": "Kategorisierte Suche"
    }
  ]
}